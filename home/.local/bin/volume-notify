#!/bin/sh

set -e

if ponymix --sink is-muted; then
  MUTE=" (muted)"
  ICON=audio-volume-muted
else
  ICON=audio-volume-medium
fi

if ! ponymix --source is-muted; then
  MUTE2=" (mic: ON)"
fi

notify-send.sh -u low \
  --replace-file=$XDG_RUNTIME_DIR/volume-notification.lock \
  --icon $ICON \
  --hint="int:transient:1" \
  "Volume changed" \
  "$(ponymix get-volume)% $MUTE $MUTE2"
