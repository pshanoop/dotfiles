#!/bin/sh

### Daemons ###
eval $(ssh-agent -s)
eval $(gpg-agent --daemon)

### X ###
/usr/bin/xbindkeys &

if [ -e ~/.Xresources ]; then
  /usr/bin/xrdb -merge ~/.Xresources
fi;

### Compiz ###
/usr/bin/compiz ccp &
sh $HOME/.fehbg

### Background ###
/usr/lib/xfce4/notifyd/xfce4-notifyd &
/usr/bin/volctld &

### Desktop ###
/usr/bin/lxpanel &

### Host specific ###
if [ "hermes.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/wicd-gtk &
  /usr/bin/xfce4-power-manager &
  /usr/bin/start-pulseaudio-x11 &
  /usr/bin/eject -i on &
fi;
if [ "hyperion.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/blueman-applet &
  /usr/bin/numlockx on &
fi;
if [ "ares.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/wicd-gtk -t &
  /usr/bin/xfce4-power-manager &
  /usr/bin/numlockx on &
  #/usr/bin/start-pulseaudio-x11 &
  /usr/bin/xset b 4 10000 100
fi;

/usr/bin/parcellite --daemon &
/usr/bin/x11vnc -noxdamage -forever -localhost -xauth $XAUTHORITY -display :0 -nopw -ncache 10 >$HOME/.cache/x11vnc.log 2>&1 &

# Sleep forever, but as a hack keep gtk-window-decorator alive
while [ TRUE ]; do
  /usr/bin/gtk-window-decorator;
  /usr/bin/sleep 120;
done;
