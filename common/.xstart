#!/bin/sh

### Daemons ###
eval $(ssh-agent -s)
eval $(gpg-agent --daemon)

### X ###
/usr/bin/xbindkeys &

if [ -e $HOME/.Xresources ]; then
  /usr/bin/xrdb -merge $HOME/.Xresources
fi;

### Compiz ###
/usr/bin/compiz ccp &
if [ -e $HOME/.fehbg ]; then
  sh $HOME/.fehbg
fi;

### Background ###
/usr/lib/xfce4/notifyd/xfce4-notifyd &
/usr/bin/volctld &

### Desktop ###
/usr/bin/lxpanel &
/usr/bin/xfce4-power-manager &

### Host specific ###
if [ "hermes.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/start-pulseaudio-x11 &
  /usr/bin/eject -i on &
fi;
if [ "hyperion.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/blueman-applet &
  /usr/bin/numlockx on &
fi;
if [ "ares.ubertech.com.ar" = "`hostname`" ]; then
  /usr/bin/numlockx on &
  /usr/bin/start-pulseaudio-x11 &
  /usr/bin/xset b 4 10000 100
fi;

if [ -f $HOME/.is_laptop ]; then
  /usr/bin/wicd-gtk -t &
  /usr/bin/xautolock -time 5 -locker slock -corners 00-0 &
fi;

/usr/bin/parcellite --daemon &
/usr/bin/x11vnc -noxdamage -forever -localhost -xauth $XAUTHORITY -display :0 -nopw -ncache 10 >$HOME/.cache/x11vnc.log 2>&1 &

# Sleep forever, but as a hack keep gtk-window-decorator alive
while [ TRUE ]; do
  /usr/bin/gtk-window-decorator;
  /usr/bin/sleep 60;
done;
